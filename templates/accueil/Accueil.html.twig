{% extends "base.html.twig" %}
{% block content %}

    <div class="modal fade" id="licenceModal" tabindex="-1" role="dialog" aria-labelledby="licenceModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="licenceModalLabel">Erreur</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Le numéro de licence saisi ne correspond pas
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" data-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="licenceModalCompte" tabindex="-1" role="dialog" aria-labelledby="licenceModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="licenceModalLabel">Succes</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Votre compte a été confirmé
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="licenceModalCompteSuppr" tabindex="-1" role="dialog" aria-labelledby="licenceModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="licenceModalLabel">Succes</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Votre demande a bien été annulée
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" data-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="licenceModalCompteMdpInvalide" tabindex="-1" role="dialog" aria-labelledby="licenceModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="licenceModalLabel">Succes</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Le mot de passe est invalide
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary " data-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="successInscriCongres" tabindex="-1" role="dialog" aria-labelledby="licenceModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="licenceModalLabel">Succes</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Votre inscription a été enregistrée avec succès.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary " data-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    {% if app.flashes('danger') %}
        <script>
            $(document).ready(function(){
                $('#licenceModal').modal('show');
            });
        </script>
    {% endif %}

    {% if app.flashes('success') %}
        <script>
            $(document).ready(function(){
                $('#licenceModalCompte').modal('show');
            });
        </script>
    {% endif %}

    {% if app.flashes('successSuprr') %}
        <script>
            $(document).ready(function(){
                $('#licenceModalCompteSuppr').modal('show');
            });
        </script>
    {% endif %}

    {% if app.flashes('erreurMdp') %}
        <script>
            $(document).ready(function(){
                $('#licenceModalCompteMdpInvalide').modal('show');
            });
        </script>
    {% endif %}

    {% if app.flashes('successInscriCongres') %}
        <script>
            $(document).ready(function(){
                $('#successInscriCongres').modal('show');
            });
        </script>
    {% endif %}


    <div class="flex flex-col justify-center item-center w-[70%]">    
        <div class="p-6 ">
            <h2 class="text-xl text-center font-bold mb-4 ">Dates du Congrès</h2>
            <h2 class="text-sm text-center">Le congrès se déroulera du 20 au 23 Octobre 2024.</h2>
        </div>

<div class=" border border-solid border-black">
        <!-- Bloc pour les ateliers proposés -->
       <div class="p-6 bg-white">
    <h2 class="text-xl text-center font-bold mb-4">Ateliers Proposés</h2>
    <div id="ateliersContainer" class="ateliers-container grid grid-cols-1 sm:grid-cols-2  gap-4">
        {% set displayedCount = 0 %}
        {% for atelier in ateliers %}
            {% if displayedCount < 2 %}
                <div class="atelier-wrapper">
                    <div class="atelier border border-solid border-black bg-gray-50 hover:bg-gray-300 transition duration-500 ease-in-out transform hover:-translate-y-1 hover:scale-100 p-4 mb-4 cursor-pointer">
                        <h3 class="text-base font-semibold decoration-neutral-200">{{ atelier.libelle }}</h3>
                        <ul>
                            {% for theme in atelier.themes %}
                                <li class="text-sm">{{ theme.libelle }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% set displayedCount = displayedCount + 1 %}
            {% else %}
                <div class="atelier-wrapper hidden">
                    <div class="atelier border border-solid border-black grid bg-gray-50 hover:bg-gray-300 transition duration-500 ease-in-out transform hover:-translate-y-1 hover:scale-100 p-4 mb-4 cursor-pointer">
                        <h3 class="text-base font-semibold decoration-neutral-200">{{ atelier.libelle }}</h3>
                        <ul>
                            {% for theme in atelier.themes %}
                                <li class="text-sm">{{ theme.libelle }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
    <button id="showMoreButton" class="block mx-auto mt-4 bg-black text-white px-4 py-2 rounded hover:bg-yellow-500">Afficher plus</button>
</div>


<script>
    const showMoreButton = document.getElementById('showMoreButton');
    const ateliersContainer = document.getElementById('ateliersContainer');
    const ateliers = Array.from(ateliersContainer.querySelectorAll('.atelier-wrapper'));
    const ateliersToShow = 2;
    let index = ateliersToShow;

    showMoreButton.addEventListener('click', () => {
        for (let i = index; i < index + ateliersToShow; i++) {
            if (i < ateliers.length) {
                ateliers[i].classList.remove('hidden');
            }
        }
        index += ateliersToShow;

        if (index >= ateliers.length) {
            showMoreButton.classList.add('hidden');
        }
    });
</script>



        <!-- Bloc pour les vacations -->
        <div class="p-6 bg-white">
            <h2 class="text-xl text-center font-bold mb-4 ">Horraires des ateliers</h2>
            <div class="ateliers-container flex flex-wrap justify-center item-center -mx-2">
                <div 
                    tabindex="0" 
                    role="button" 
                    class="atelier border border-solid border-black bg-red-500 hover:bg-yellow-500 transition duration-500 ease-in-out transform hover:-translate-y-1 hover:scale-110 p-4 mb-4 cursor-pointer mx-5 w-1/3"
                    aria-label="Détails des horraires">

                    <div class="text-center text-white">
                        <h3 class="text-base font-semibold decoration-neutral-200"> 8 septembre </h3>
                        {% for vacation in vacations|slice(0,3) %}
                            <h1> {{vacation.dateHeureDebut|slice(11,5)}} - {{vacation.dateHeureFin|slice(11,5)}} </h1>
                        {% endfor %}

                        <h3 class="text-base font-semibold decoration-neutral-200"> 9 septembre </h3>
                        {% for vacation in vacations|slice(3,2) %}
                            <h1> {{vacation.dateHeureDebut|slice(11,5)}} - {{vacation.dateHeureFin|slice(11,5)}} </h1>
                        {% endfor %}
                    </div>
                </div>

                 {#}{% set break = false %}
                        {% if vacation.id == 4 %}
                            {% set break = true %}
                        {% endif %}

                        {% if not break %}
                            <h1> {{vacation.dateHeureDebut}} </h1>
                        {% endif %}

                        {% if break %}
                            {% set break = false %}
                        {% endif %}
    
                    {% endfor %}{#}
            </div>
        </div>


        <!-- Bloc pour les options d'hébergement -->
        <section class="p-6">
            <h2 class="text-xl text-center font-bold mb-4">Options d'Hébergement</h2>
             <div class="ateliers-container flex flex-wrap justify-center item-center -mx-2">
            {% for hotel in hotels %}
                <div 
                        tabindex="0" 
                        role="button" 
                        class="atelier bg-white hover:bg-gray-300 transition duration-500 ease-in-out transform hover:-translate-y-1 hover:scale-110 p-4 mb-4 cursor-pointer mx-5 w-1/3"
                        aria-label="Option hebergement"
                        >
                    <h3 class="text-base text-center font-semibold mb-2">{{ hotel.pnom }}</h3>
                    <p class="text-sm text-center">Adresse : {{ hotel.adresse1 }}, {{ hotel.cp }} {{ hotel.ville }}</p>

                    <p class="font-bold text-center ">Tarifications :</p>
                    {% if hotel.pnom == "ibis Styles Lille Centre Gare Beffroi" %}
                        <li class="text-sm text-center">Single: {{ ibisSingle }} €</li>
                        <li class="text-sm text-center">Double: {{ ibisDouble }} €</li>
                        {% endif %}

                    {% if hotel.pnom == "Ibis Budget Lille Gares Vieux-Lille" %}
                        <li class="text-sm text-center">Single: {{ budgetSingle }} €</li>
                        <li class="text-sm text-center">Double: {{ budgetDouble }} €</li>
                        {% endif %}

                </div>
            {% endfor %}
             </div>
        </section>
    </div>
    </div>
{% endblock %}